<div class="container" style="height: 100vh">
  <mat-tab-group>
    <mat-tab  label = "Список рабочих" >
      <input type="button" value="Добавить" class="btn btn-default" (click)="addWorker()">
      <hr>
      <div [hidden]="!isAdd">
        <div class="formClass">
          <div class="card my-5">
            <div class="card-body">
              <form (ngSubmit)="onSubmit()" #workerForm="ngForm">
                <div class="row">
                  <div class="col">
                    <div>Общая информация</div>
                    <hr>
                    <div class="form-group">
                      <label for="name">Имя</label>
                      <input type="text" [(ngModel)]="myWorker.name"
                             value="{{myWorker.name}}"
                             class="form-control"
                             id="name"
                             name="name"
                             placeholder="Имя"
                             required #name="ngModel">
                    </div>

                    <div class="form-group">
                      <label for="phoneNumber">Номер телефона</label>
                      <input type="text" [(ngModel)]="myWorker.phoneNumber"
                             class="form-control"
                             id="phoneNumber"
                             name="phoneNumber"
                             placeholder="Номер телефона">
                    </div>
                  </div>
                  <div class="col">
                    <div>Платежная информация</div>
                    <hr>
                    <div class="form-group">
                      <label for="numberAccount">Номер счета</label>
                      <input type="text" [(ngModel)]="myWorker.numberAccount"
                             class="form-control"
                             id="numberAccount"
                             name="numberAccount"
                             placeholder="Номер счета">
                    </div>
                    <div class="form-group">
                      <label for="bic">БИК</label>
                      <input type="text" [(ngModel)]="myWorker.bic"
                             class="form-control"
                             id="bic"
                             name="bic"
                             placeholder="БИК">
                    </div>
                    <div class="form-group">
                      <label for="inn">ИНН</label>
                      <input type="text" [(ngModel)]="myWorker.inn"
                             class="form-control"
                             id="inn"
                             name="inn"
                             placeholder="ИНН">
                    </div>
                    <div class="form-group">
                      <label for="kpp">КПП</label>
                      <input type="text" [(ngModel)]="myWorker.kpp"
                             class="form-control"
                             id="kpp"
                             name="kpp"
                             placeholder="КПП">
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <input type="hidden" [(ngModel)]="myWorker.status" value=true>
                </div>
                <div class="btn-group">
                  <button type="submit" [disabled]="!workerForm.form.valid" class="btn btn-info">Сохранить</button>
                  <button type="submit" (click)="backClicked()" class="btn btn-secondary">Отмена</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
      <input type="search" class="form-control ds-input" placeholder="Поиск..."
             aria-label="Поиск по документации..." autocomplete="off" data-bd-docs-version="5.0"
             spellcheck="false" role="combobox" aria-autocomplete="list" aria-expanded="false"
             aria-owns="algolia-autocomplete-listbox-2" dir="auto" (input)="getSearch()" [(ngModel)]="this.search"
             style="position: relative; vertical-align: top;">
      <hr>
      <div class="productionClass">
        <div *ngFor="let myWorker of myWorkers">
          <div>Имя: {{myWorker.name}}</div>
          <div>Номер телефона: {{myWorker.phoneNumber}}</div>
          <div class="row justify-content-end">
            <div class="col-3">
              <div class="btn-group">
                <button type="button" value="Подробнее" (click)="openDetails(myWorker)" class="btn btn-info">Подробнее</button>
                <button type="submit" value=""  class="btn btn-secondary" (click)="editWorker(myWorker)"><svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-pencil" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                  <path fill-rule="evenodd" d="M11.293 1.293a1 1 0 0 1 1.414 0l2 2a1 1 0 0 1 0 1.414l-9 9a1 1 0 0 1-.39.242l-3 1a1 1 0 0 1-1.266-1.265l1-3a1 1 0 0 1 .242-.391l9-9zM12 2l2 2-9 9-3 1 1-3 9-9z"/>
                  <path fill-rule="evenodd" d="M12.146 6.354l-2.5-2.5.708-.708 2.5 2.5-.707.708zM3 10v.5a.5.5 0 0 0 .5.5H4v.5a.5.5 0 0 0 .5.5H5v.5a.5.5 0 0 0 .5.5H6v-1.5a.5.5 0 0 0-.5-.5H5v-.5a.5.5 0 0 0-.5-.5H3z"/>
                </svg></button>
                <button type="submit" value=""  class="btn btn-danger" (click)="openDialog(myWorker)"><svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-trash-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                  <path fill-rule="evenodd" d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5a.5.5 0 0 0-1 0v7a.5.5 0 0 0 1 0v-7z"/>
                </svg></button>
              </div>
            </div>
          </div>
          <hr>
        </div>
      </div>
    </mat-tab>
    <mat-tab  label = "Зарплаты" >
      <hr>
      <input type="search" class="form-control ds-input" placeholder="Поиск..."
             aria-label="Поиск по документации..." autocomplete="off" data-bd-docs-version="5.0"
             spellcheck="false" role="combobox" aria-autocomplete="list" aria-expanded="false"
             aria-owns="algolia-autocomplete-listbox-2" dir="auto" (input)="getSearch()" [(ngModel)]="this.search"
             style="position: relative; vertical-align: top;">
      <hr>
      <div class="row g-3">
        <div class="col">
          <input type="date" [(ngModel)]="dateStartSalary" class="form-control" placeholder="Начало" aria-label="Начало">
          <label for="Name"> Дата начала</label>
        </div>
        <div class="col">
          <input type="date" [(ngModel)]="dateEndSalary" min="{{dateStartSalary}}" class="form-control" placeholder="Конец" aria-label="Конец">
          <label for="Name"> Дата окончания</label>
        </div>
        <div class="col">
          <button type="submit" (click)="findByDate()" class="btn btn-info">Найти</button>
        </div>
      </div>
      <hr>
      <div class="productionClass">
        <ng *ngIf="salaries.length>0">
        <table class="table table-striped">
          <thead>
          <tr>
            <td>Имя</td>
            <td>Номер счета</td>
            <td>ИНН</td>
            <td>БИК</td>
            <td>КПП</td>
            <td>Сумма</td>
            <td></td>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let salary of salaries">
            <td>{{salary.worker.name}}</td>
            <td>{{salary.worker.numberAccount}}</td>
            <td>{{salary.worker.bic}}</td>
            <td>{{salary.worker.inn}}</td>
            <td>{{salary.worker.kpp}}</td>
            <td>{{salary.sumSalary}}</td>
            <td>
              <input type="button" value="Подробнее" (click)="openSalaryDetails(salary)" class="btn btn-info">
            </td>
          </tr>
          </tbody>
        </table>
        </ng>
        <ng *ngIf="salaries.length==0">
          <div><h1>Ничего не найдено</h1></div>
        </ng>
      </div>
    </mat-tab>
    <mat-tab  label = "История платежей" >
      <div class="productionClass">
        <table class="table table-striped">
          <thead>
          <tr>
            <td>Наименование позиции</td>
            <td>Наименование объекта</td>
            <td>Рабочий</td>
            <td>Дата Выплаты</td>
            <td>Сумма</td>
            <td></td>
            <td></td>
          </tr>
          </thead>
          <tbody>
          <ng-container *ngFor="let salaryWorker of this.salaryWorkers">
          <tr *ngIf="salaryWorker.statusExecution">
              <td>{{salaryWorker.unitName}}</td>
              <td>{{salaryWorker.namePosition}}</td>
              <td>{{salaryWorker.worker.name}}</td>
              <td>{{salaryWorker.dateExecution | date: 'dd/MM/yy'}}</td>
              <td>{{salaryWorker.sumSalary}}</td>
            <td>
              <button type="button" value="Изменить статус" (click)="updateStatus(salaryWorker)" class="btn btn-dark"> <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-arrow-counterclockwise" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" d="M12.83 6.706a5 5 0 0 0-7.103-3.16.5.5 0 1 1-.454-.892A6 6 0 1 1 2.545 5.5a.5.5 0 1 1 .91.417 5 5 0 1 0 9.375.789z"/>
                <path fill-rule="evenodd" d="M7.854.146a.5.5 0 0 0-.708 0l-2.5 2.5a.5.5 0 0 0 0 .708l2.5 2.5a.5.5 0 1 0 .708-.708L5.707 3 7.854.854a.5.5 0 0 0 0-.708z"/>
              </svg></button>
            </td>
          </tr>
          </ng-container>
          </tbody>
        </table>
      </div>
    </mat-tab>
  </mat-tab-group >
</div>

