<div class="container" style="height: 100vh">
  <mat-tab-group>
    <mat-tab label="Список поставщиков">
      <input type="button" value="Добавить" class="btn btn-default" (click)="addSupplier()">
      <hr>
      <div [hidden]="!isAdd">
        <div class="formClass">
          <div class="card my-5">
            <div class="card-body">
              <form (ngSubmit)="onSubmit()" #supplierForm="ngForm">
                <div class="row">
                  <div class="col">
                    <div>Общая информация</div>
                    <hr>
                    <div class="form-group">
                      <label for="name">Имя</label>
                      <input type="text" [(ngModel)]="supplier.name"
                             class="form-control"
                             id="name"
                             name="name"
                             placeholder="Имя"
                             required #name="ngModel">
                    </div>

                    <div class="form-group">
                      <label for="contactPhoneNumber">Номер телефона</label>
                      <input type="text" [(ngModel)]="supplier.contactPhoneNumber"
                             class="form-control"
                             id="contactPhoneNumber"
                             name="contactPhoneNumber"
                             placeholder="Номер телефона">
                    </div>
                    <div class="form-group">
                      <label for="address">Адрес</label>
                      <input type="text" [(ngModel)]="supplier.address"
                             class="form-control"
                             id="address"
                             name="address"
                             placeholder="Адрес">
                    </div>
                    <div class="form-group">
                      <label for="email">Email</label>
                      <input type="text" [(ngModel)]="supplier.email"
                             class="form-control"
                             id="email"
                             name="email"
                             placeholder="Email">
                    </div>
                  </div>
                  <div class="col">
                    <div>Платежная информация</div>
                    <hr>
                    <div class="form-group">
                      <label for="numberAccount">Номер счета</label>
                      <input type="text" [(ngModel)]="supplier.numberAccount"
                             class="form-control"
                             id="numberAccount"
                             name="numberAccount"
                             placeholder="Номер счета">
                    </div>
                    <div class="form-group">
                      <label for="bic">БИК</label>
                      <input type="text" [(ngModel)]="supplier.bic"
                             class="form-control"
                             id="bic"
                             name="bic"
                             placeholder="БИК">
                    </div>
                    <div class="form-group">
                      <label for="inn">ИНН</label>
                      <input type="text" [(ngModel)]="supplier.inn"
                             class="form-control"
                             id="inn"
                             name="inn"
                             placeholder="ИНН">
                    </div>
                    <div class="form-group">
                      <label for="kpp">КПП</label>
                      <input type="text" [(ngModel)]="supplier.kpp"
                             class="form-control"
                             id="kpp"
                             name="kpp"
                             placeholder="КПП">
                    </div>
                  </div>
                </div>
                <div class="btn-group">
                  <button type="submit" [disabled]="!supplierForm.valid" class="btn btn-info">Сохранить</button>
                  <button type="submit" (click)="backClicked()" class="btn btn-secondary">Отмена</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
      <input type="search" class="form-control ds-input" id="search-input" placeholder="Поиск..."
             aria-label="Поиск по документации..." autocomplete="off" data-bd-docs-version="5.0"
             spellcheck="false" role="combobox" aria-autocomplete="list" aria-expanded="false"
             aria-owns="algolia-autocomplete-listbox-2" dir="auto" (input)="getSearch()" [(ngModel)]="this.search"
             style="position: relative; vertical-align: top;">
      <hr>
      <div class="productionClass">
        <div *ngFor="let supplier of suppliers">
          <div>Имя: {{supplier.name}}</div>
          <div>Номер телефона: {{supplier.contactPhoneNumber}}</div>
          <div>Адрес: {{supplier.address}}</div>
          <div>Email: {{supplier.email}}</div>
          <div class="row justify-content-end">
            <div class="col-3">
              <div class="btn-group">
                <button type="button" value="Подробнее" (click)="openDetails(supplier)" class="btn btn-info">Подробнее
                </button>
                <button type="submit" value="" class="btn btn-secondary" (click)="editSupplier(supplier)">
                  <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-pencil" fill="currentColor"
                       xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd"
                          d="M11.293 1.293a1 1 0 0 1 1.414 0l2 2a1 1 0 0 1 0 1.414l-9 9a1 1 0 0 1-.39.242l-3 1a1 1 0 0 1-1.266-1.265l1-3a1 1 0 0 1 .242-.391l9-9zM12 2l2 2-9 9-3 1 1-3 9-9z"/>
                    <path fill-rule="evenodd"
                          d="M12.146 6.354l-2.5-2.5.708-.708 2.5 2.5-.707.708zM3 10v.5a.5.5 0 0 0 .5.5H4v.5a.5.5 0 0 0 .5.5H5v.5a.5.5 0 0 0 .5.5H6v-1.5a.5.5 0 0 0-.5-.5H5v-.5a.5.5 0 0 0-.5-.5H3z"/>
                  </svg>
                </button>
                <button type="submit" value="" class="btn btn-danger" (click)="openDialog(supplier)">
                  <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-trash-fill" fill="currentColor"
                       xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd"
                          d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5a.5.5 0 0 0-1 0v7a.5.5 0 0 0 1 0v-7z"/>
                  </svg>
                </button>
              </div>
            </div>
          </div>
          <hr>
        </div>
      </div>
    </mat-tab>
    <mat-tab label="Оплата поставок">
      <hr>
      <input type="search" class="form-control ds-input" placeholder="Поиск..."
             aria-label="Поиск по документации..." autocomplete="off" data-bd-docs-version="5.0"
             spellcheck="false" role="combobox" aria-autocomplete="list" aria-expanded="false"
             aria-owns="algolia-autocomplete-listbox-2" dir="auto" (input)="getSearch()" [(ngModel)]="this.search"
             style="position: relative; vertical-align: top;">
      <hr>
      <div class="row g-3">
        <div class="col">
          <input type="date" [(ngModel)]="dateStartPay" class="form-control" placeholder="Начало" aria-label="Начало">
        </div>
        <div class="col">
          <input type="date" [(ngModel)]="dateEndPay" min="{{dateStartPay}}" class="form-control" placeholder="Конец"
                 aria-label="Конец">
        </div>
        <div class="col">
          <button type="submit" (click)="findByDate()" class="btn btn-info">Найти</button>
        </div>
      </div>
      <hr>
      <div class="productionClass">
        <ng *ngIf="payments.length>0">
          <table class="table table-striped">
            <thead>
            <tr>
              <td>Имя</td>
              <td>Номер счета</td>
              <td>ИНН</td>
              <td>БИК</td>
              <td>КПП</td>
              <td>Сумма</td>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let payment of payments">
              <td>{{payment.suppliers.name}}</td>
              <td>{{payment.suppliers.numberAccount}}</td>
              <td>{{payment.suppliers.inn}}</td>
              <td>{{payment.suppliers.bic}}</td>
              <td>{{payment.suppliers.kpp}}</td>
              <td>{{payment.sumPay}}</td>
              <td>
                <input type="button" value="Подробнее" (click)="openPaymentDetails(payment)" class="btn btn-info">
              </td>
            </tr>
            </tbody>
          </table>
        </ng>
        <ng *ngIf="payments.length==0">
          <div><h1>Ничего не найдено</h1></div>
        </ng>
      </div>
    </mat-tab>
    <mat-tab  label = "История платежей" >
      <div class="productionClass">
        <table class="table table-striped">
          <thead>
          <tr>
            <td>Наименование позиции</td>
            <td>Наименование объекта</td>
            <td>Рабочий</td>
            <td>Дата Выплаты</td>
            <td>Сумма</td>
            <td></td>
            <td></td>
          </tr>
          </thead>
          <tbody>
          <ng-container *ngFor="let paymentSupplier of this.paymentSuppliers">
          <tr *ngIf="paymentSupplier.statusExecution">
            <td>{{paymentSupplier.unitName}}</td>
            <td>{{paymentSupplier.namePosition}}</td>
            <td>{{paymentSupplier.suppliers.name}}</td>
            <td>{{paymentSupplier.dateExecution | date: 'dd/MM/yy'}}</td>
            <td>{{paymentSupplier.sumPay}}</td>
            <td>
              <button type="button" value="Изменить статус" (click)="updateStatus(paymentSupplier)" class="btn btn-dark"> <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-arrow-counterclockwise" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" d="M12.83 6.706a5 5 0 0 0-7.103-3.16.5.5 0 1 1-.454-.892A6 6 0 1 1 2.545 5.5a.5.5 0 1 1 .91.417 5 5 0 1 0 9.375.789z"/>
                <path fill-rule="evenodd" d="M7.854.146a.5.5 0 0 0-.708 0l-2.5 2.5a.5.5 0 0 0 0 .708l2.5 2.5a.5.5 0 1 0 .708-.708L5.707 3 7.854.854a.5.5 0 0 0 0-.708z"/>
              </svg></button>
            </td>
          </tr>
          </ng-container>
          </tbody>
        </table>
      </div>
    </mat-tab>
  </mat-tab-group>
</div>
